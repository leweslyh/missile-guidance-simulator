# 导弹制导律验证程序 - 用户手册

## 1. 界面介绍

导弹制导律验证程序的界面主要分为三个区域：

### 1.1 左侧控制面板

左侧控制面板用于配置仿真参数和运行仿真，包含以下部分：

#### 1.1.1 导弹参数
- **初始位置**：导弹的初始坐标 (x, y, z)
- **初始速度**：导弹的初始速度分量 (vx, vy, vz)
- **最大加速度**：导弹能够产生的最大加速度
- **质量**：导弹的质量
- **推力**：导弹发动机的推力
- **阻力系数**：导弹的空气阻力系数

#### 1.1.2 目标参数
- **初始位置**：目标的初始坐标 (x, y, z)
- **初始速度**：目标的初始速度分量 (vx, vy, vz)
- **运动类型**：目标的运动方式（匀速、圆周、正弦、随机、规避、之字形、螺旋）
- **运动参数**：根据运动类型设置相应的参数

#### 1.1.3 制导律参数
- **制导律类型**：选择制导律（PN、APN、OGL、自定义）
- **导航比**：PN、APN、OGL制导律的导航比
- **自定义代码**：自定义制导律的JavaScript代码

#### 1.1.4 仿真参数
- **时间步长**：仿真的时间步长
- **最大时间**：仿真的最大时间
- **脱靶量阈值**：判定拦截成功的最大相对距离

#### 1.1.5 运行按钮
- **运行仿真**：开始执行仿真
- **预设场景**：选择预设的仿真场景

### 1.2 右侧可视化区域

右侧可视化区域用于显示仿真结果，包含以下标签页：

#### 1.2.1 3D轨迹
- 显示导弹和目标的三维运动轨迹
- 标记导弹和目标的终点位置
- 支持旋转、缩放和移动视角

#### 1.2.2 相对距离
- 显示导弹与目标相对距离随时间的变化
- 直观反映拦截过程

#### 1.2.3 加速度
- 显示导弹加速度的三个分量随时间的变化
- 反映制导指令的变化

#### 1.2.4 速度
- 显示导弹和目标的速度大小随时间的变化

#### 1.2.5 接近速度
- 显示导弹与目标的接近速度随时间的变化

### 1.3 结果显示区域

仿真结束后，结果显示区域会显示以下信息：
- 仿真状态（成功命中、超时、速度过低）
- 终止原因
- 仿真时间
- 脱靶量
- 导弹和目标的最终位置和速度

## 2. 快速开始

### 2.1 使用预设场景

1. 在左侧控制面板中，点击"预设场景"下拉菜单
2. 选择一个预设场景（如"基础拦截场景"）
3. 点击"运行仿真"按钮
4. 在右侧查看3D轨迹和数据分析图表
5. 查看仿真结果

### 2.2 自定义仿真

1. 在左侧控制面板中，配置导弹参数
2. 配置目标参数和运动类型
3. 选择制导律类型并设置参数
4. 配置仿真参数
5. 点击"运行仿真"按钮
6. 查看仿真结果和可视化图表

## 3. 制导律选择与配置

### 3.1 比例导航（PN）

比例导航是最基本的制导律，参数简单：
- **导航比**：建议值为3-5，值越大，导弹响应越灵敏

### 3.2 增强比例导航（APN）

增强比例导航在PN基础上增加了目标加速度补偿：
- **导航比**：建议值为3-5

### 3.3 最优制导律（OGL）

最优制导律考虑了时间到拦截，优化能量消耗：
- **导航比**：建议值为3-5

### 3.4 自定义制导律

自定义制导律允许用户编写JavaScript代码来实现自己的制导算法。

#### 3.4.1 编写自定义制导律

1. 选择"自定义"制导律类型
2. 在代码编辑框中编写JavaScript代码
3. 代码必须返回一个长度为3的数组，表示x、y、z方向的加速度指令

#### 3.4.2 可用变量

- `missileState`：导弹状态对象
  - `position`：导弹位置 [x, y, z]
  - `velocity`：导弹速度 [vx, vy, vz]
  - `acceleration`：导弹加速度 [ax, ay, az]
  - `speed`：导弹速度大小

- `targetState`：目标状态对象
  - `position`：目标位置 [x, y, z]
  - `velocity`：目标速度 [vx, vy, vz]
  - `acceleration`：目标加速度 [ax, ay, az]

- `relativeMotion`：相对运动信息
  - `relativePosition`：相对位置 [rx, ry, rz]
  - `relativeVelocity`：相对速度 [rvx, rvy, rvz]
  - `losVector`：视线方向单位向量 [lx, ly, lz]
  - `losRate`：视线角速度 [lwx, lwy, lwz]
  - `closingVelocity`：接近速度
  - `timeToGo`：时间到拦截
  - `relativeDistance`：相对距离

- `params`：用户配置的参数对象
- `N`：导航比
- `r`：相对距离
- `Vc`：接近速度
- `losRate`：视线角速度
- `losVector`：视线方向单位向量
- `relativePos`：相对位置
- `relativeVel`：相对速度

#### 3.4.3 可用函数

- `norm(vec)`：计算向量的模长
- `dot(v1, v2)`：计算两个向量的点积
- `cross(v1, v2)`：计算两个向量的叉积
- `normalize(vec)`：将向量归一化
- `multiply(vec, scalar)`：向量乘以标量
- `add(v1, v2)`：向量加法
- `subtract(v1, v2)`：向量减法
- `Math`：JavaScript Math对象，包含常用数学函数

#### 3.4.4 示例：自定义PN制导律

```javascript
// 自定义PN制导律示例
const Vc = closingVelocity;
const omega_los = losRate;
const r_hat = losVector;

// 计算垂直于视线的加速度
const crossProduct = [
  omega_los[1] * r_hat[2] - omega_los[2] * r_hat[1],
  omega_los[2] * r_hat[0] - omega_los[0] * r_hat[2],
  omega_los[0] * r_hat[1] - omega_los[1] * r_hat[0]
];

const accelCmd = crossProduct.map(val => val * N * Vc);

return accelCmd;
```

## 4. 目标运动类型

### 4.1 匀速运动

目标保持恒定速度运动，无加速度。

### 4.2 圆周运动

目标绕指定中心点做圆周运动：
- **角速度**：圆周运动的角速度（rad/s）
- **中心点**：圆周运动的中心点坐标

### 4.3 正弦运动

目标在垂直方向做正弦振动：
- **振幅**：振动的振幅
- **频率**：振动的频率

### 4.4 随机运动

目标做随机机动：
- **最大加速度**：随机机动的最大加速度
- **平滑因子**：机动的平滑程度

### 4.5 规避运动

目标智能规避导弹拦截：
- **规避频率**：规避机动的频率
- **规避振幅**：规避机动的振幅

### 4.6 之字形运动

目标做之字形运动：
- **之字形振幅**：之字形运动的振幅
- **之字形频率**：之字形运动的频率

### 4.7 螺旋运动

目标做螺旋运动：
- **螺旋频率**：螺旋运动的频率
- **螺旋振幅**：螺旋运动的振幅
- **螺旋增长率**：螺旋半径的增长率

## 5. 结果分析

### 5.1 3D轨迹分析

3D轨迹图显示导弹和目标的完整运动轨迹：
- 蓝色实线：导弹轨迹
- 红色虚线：目标轨迹
- 蓝色圆点：导弹终点
- 红色方块：目标终点

通过观察3D轨迹，可以分析导弹的拦截路径和目标的运动特性。

### 5.2 相对距离分析

相对距离图显示导弹与目标的相对距离随时间的变化：
- 若相对距离最终趋近于零，说明拦截成功
- 若相对距离先减小后增大，说明导弹错失目标

### 5.3 加速度分析

加速度图显示导弹加速度的三个分量：
- 可以观察导弹的机动特性
- 分析制导指令的变化
- 评估导弹的能量消耗

### 5.4 速度分析

速度图显示导弹和目标的速度大小随时间的变化：
- 分析导弹的速度变化
- 评估导弹的动能变化

### 5.5 接近速度分析

接近速度图显示导弹与目标的接近速度：
- 接近速度为正表示导弹正在接近目标
- 接近速度为负表示导弹正在远离目标

## 6. 预设场景说明

### 6.1 基础拦截场景

- **描述**：导弹从原点拦截远处匀速直线运动的目标
- **导弹**：初始位置(0,0,0)，初始速度(300,0,0)
- **目标**：初始位置(5000,3000,1000)，初始速度(-200,0,0)
- **制导律**：PN制导律，导航比4

### 6.2 规避目标场景

- **描述**：导弹拦截进行智能规避机动的目标
- **导弹**：初始位置(0,0,0)，初始速度(350,0,0)
- **目标**：初始位置(6000,2000,500)，初始速度(-150,50,0)，规避机动
- **制导律**：APN制导律，导航比5

### 6.3 高空拦截场景

- **描述**：在高空环境下拦截目标，考虑大气密度变化
- **导弹**：初始位置(0,10000,0)，初始速度(400,0,0)
- **目标**：初始位置(8000,12000,2000)，初始速度(-250,-50,100)，正弦运动
- **制导律**：OGL制导律，导航比4.5

## 7. 常见问题解答

### 7.1 仿真无法运行

**问题**：点击"运行仿真"按钮后，仿真没有反应

**解决方案**：
- 检查是否所有必填参数都已填写
- 检查自定义制导律代码是否有语法错误
- 检查浏览器控制台是否有错误信息

### 7.2 仿真结果不准确

**问题**：仿真结果与预期不符

**解决方案**：
- 检查物理参数是否合理
- 检查导弹和目标的初始条件
- 调整制导律参数
- 减小时间步长以提高仿真精度

### 7.3 自定义制导律不工作

**问题**：自定义制导律没有产生预期的结果

**解决方案**：
- 检查代码语法是否正确
- 确保代码返回一个长度为3的数组
- 检查是否使用了正确的变量和函数
- 在代码中添加console.log()语句进行调试

### 7.4 可视化图表显示异常

**问题**：可视化图表显示异常或没有数据

**解决方案**：
- 确保仿真已成功运行
- 检查仿真数据是否生成
- 刷新页面
- 检查浏览器是否支持WebGL（用于3D可视化）

## 8. 性能优化建议

### 8.1 提高仿真精度

- 减小时间步长（建议值：0.001-0.01秒）
- 使用更精确的物理模型
- 选择合适的制导律参数

### 8.2 提高仿真速度

- 增大时间步长
- 减少仿真最大时间
- 简化物理模型
- 关闭不必要的可视化选项

## 9. 高级功能

### 9.1 导出仿真数据

仿真结束后，可以通过以下方式导出仿真数据：
1. 在浏览器控制台中，使用`console.log(simulationData)`查看完整数据
2. 复制数据到文本编辑器保存
3. 使用数据分析工具（如MATLAB、Python）进一步分析

### 9.2 比较不同制导律

1. 使用相同的导弹和目标参数
2. 分别选择不同的制导律运行仿真
3. 比较不同制导律的脱靶量、拦截时间和能量消耗
4. 分析各自的优缺点

### 9.3 调整物理参数

- 修改重力加速度
- 调整大气密度模型
- 改变阻力系数
- 调整推力大小

## 10. 技术支持

如果您在使用过程中遇到问题，可以：
1. 查看本用户手册
2. 查看技术文档
3. 检查浏览器控制台的错误信息
4. 联系开发团队

## 11. 总结

导弹制导律验证程序是一个功能强大、易于使用的仿真系统，适用于验证和比较不同导弹制导律的性能。通过本用户手册，您应该已经了解了如何使用该程序进行仿真配置、制导律选择和结果分析。

祝您使用愉快！
